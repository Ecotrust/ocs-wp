{"version":3,"sources":["../assets/scripts/search-box.js","../assets/scripts/mtiFontTrackingCode.js"],"names":["setUpOCSsearch","init","self","this","h1","document","querySelector","className","documentElement","search","title","body","indexOf","firstChild","nodeValue","widthOffset","searchBoxWidth","clientWidth","lenTest","getElementById","searchOriginalFontSize","window","getComputedStyle","getPropertyValue","sizeChanged","searchForm","setAttribute","innerHTML","checkSearchBoxLength","addEventListener","handleSearchChange","focusInput","handleSubmit","evt","width","style","fontSize","Math","max","min","parseFloat","text_length","value","length","searching","createElement","setTimeout","innerWidth","onreadystatechange","readyState","projectId","mtiTracking","type","rel","href","location","protocol","getElementsByTagName","appendChild"],"mappings":"AACA,GAAAA,iBACAC,KAAA,WACAC,KAAAC,KAEAA,KAAAC,GAAAC,SAAAC,cAAA,MAEAH,KAAAC,GAAAG,UAAA,UAGAF,SAAAG,gBAAAD,UAAA,KAEAJ,KAAAM,OAAAJ,SAAAC,cAAA,iBACAH,KAAAO,MAAA,KAAAL,SAAAM,KAAAJ,UAAAK,QAAA,QAAA,SAAAT,KAAAC,GAAAS,WAAAC,UAGAX,KAAAY,YAAAV,SAAAC,cAAA,sBAAA,IAAA,GACAH,KAAAa,eAAAb,KAAAM,OAAAQ,YAAAf,KAAAa,YACAZ,KAAAe,QAAAb,SAAAc,eAAA,eACAhB,KAAAiB,uBAAAC,OAAAC,iBAAAnB,KAAAM,OAAA,MAAAc,iBAAA,aACApB,KAAAqB,aAAA,EACArB,KAAAsB,WAAApB,SAAAC,cAAA,gBAIAH,KAAAM,OAAAiB,aAAA,cAAAxB,KAAAQ,OACAP,KAAAM,OAAAiB,aAAA,oBAAAxB,KAAAkB,wBAGAjB,KAAAe,QAAAS,UAAAzB,KAAAQ,MAEAR,KAAA0B,uBAGAzB,KAAAM,OAAAoB,iBAAA,QAAA3B,KAAA4B,oBACA3B,KAAAM,OAAAoB,iBAAA,iBAAA3B,KAAA4B,oBACA3B,KAAAM,OAAAoB,iBAAA,OAAA3B,KAAA4B,oBACA3B,KAAAM,OAAAoB,iBAAA,QAAA3B,KAAA6B,YACA5B,KAAAsB,WAAAI,iBAAA,SAAA3B,KAAA8B,eAKAD,WAAA,WACA7B,KAAAO,OAAAiB,aAAA,cAAA,KAGAE,qBAAA,SAAAK,GACA,GAAAC,GAAAhC,KAAAgB,QAAAD,YAAA,CACAiB,GAAAhC,KAAAc,gBAEAd,KAAAO,OAAA0B,MAAAC,SAAAC,KAAAC,IAAAD,KAAAE,IAAArC,KAAAc,eAAAkB,EAAA,GAAAM,WAAA,KAAAA,WAAA,KAAA,KACAtC,KAAAsB,aAAA,GACAtB,KAAAsB,aAAAU,EAAAhC,KAAAc,iBACAd,KAAAO,OAAA0B,MAAAC,SAAAlC,KAAAkB,yBAIAU,mBAAA,SAAAG,GACA,GAAAQ,GAAAvC,KAAAO,OAAAiC,MAAAC,MAEAzC,MAAAgB,QAAAS,UAAAzB,KAAAO,OAAAiC,MAEA,IAAAD,IACAvC,KAAAO,OAAAiB,aAAA,cAAAxB,KAAAQ,OACAR,KAAAgB,QAAAS,UAAAzB,KAAAQ,OAEAR,KAAA0B,wBAGAI,aAAA,SAAAC,GACA,GACAW,IADAvC,SAAAC,cAAA,QACAD,SAAAwC,cAAA,QACAD,GAAArC,UAAA,YAEAqC,EAAAjB,UAAA,+BAAAzB,KAAAO,OAAAiC,MAAA,WAKArB,OAAAyB,WAAA,WACAzC,SAAAM,KAAAJ,UAAAF,SAAAM,KAAAJ,WAAA,qBACA,MASAc,QAAA0B,WAAA,MAEA1C,SAAAG,gBAAAD,UAAA,UAIAF,SAAA2C,mBAAA,WACA,gBAAA3C,SAAA4C,YACAjD,eAAAC,QCjGA,IAAAiD,WAAA,KACAC,YAAA9C,SAAAwC,cAAA,OAEAM,aAAAC,KAAA,WACAD,YAAAE,IAAA,aACAF,YAAAG,MAAA,WAAAjD,SAAAkD,SAAAC,SAAA,SAAA,SAAA,kDAAAN,WACA7C,SAAAoD,qBAAA,QAAA,IAAApD,SAAAoD,qBAAA,QAAA,IAAAC,YAAAP","file":"inline-head.js","sourcesContent":["\nvar setUpOCSsearch = {\n  init: function() {\n\tself = this;\n\n\tthis.h1 = document.querySelector('h1');\n\t// Hide the h1 immediately\n\tthis.h1.className = 'sr-only';\n\n\t// hello world\n\tdocument.documentElement.className = 'js';\n\n\tthis.search = document.querySelector('#search-field');\n\tthis.title = document.body.className.indexOf('home') !== -1 ? 'Search' : this.h1.firstChild.nodeValue;\n\n\t// Little breathing room for grid/list buttons. Oh, flexbox.\n\tthis.widthOffset = document.querySelector('#cpt-listings-wrap') ? 150 : 42;\n\tthis.searchBoxWidth = this.search.clientWidth - self.widthOffset;\n\tthis.lenTest = document.getElementById('length-test');\n\tthis.searchOriginalFontSize = window.getComputedStyle(this.search, null).getPropertyValue('font-size');\n\tthis.sizeChanged = false;\n\tthis.searchForm = document.querySelector('.search-form');\n\n\n\t// Move the title to the searchbox\n\tthis.search.setAttribute('placeholder', self.title);\n\tthis.search.setAttribute('data-og-font-size', self.searchOriginalFontSize);\n\n\t// Stuff the hidden length checker\n\tthis.lenTest.innerHTML = self.title;\n\t// And check the new length\n\tself.checkSearchBoxLength();\n\n\t// Do stuff\n\tthis.search.addEventListener('input', self.handleSearchChange);\n\tthis.search.addEventListener('propertychange', self.handleSearchChange);\n\tthis.search.addEventListener('blur', self.handleSearchChange);\n\tthis.search.addEventListener('focus', self.focusInput);\n\tthis.searchForm.addEventListener('submit', self.handleSubmit);\n\n  },\n\n  // When the user clicks out of the box, reset the placeholder if empty\n  focusInput: function() {\n\tself.search.setAttribute('placeholder', \"\");\n  },\n\n  checkSearchBoxLength: function(evt) {\n\tvar width = (self.lenTest.clientWidth + 1);// + \"px\";\n\tif (width > self.searchBoxWidth) {\n\t  // resize on change but set a min and max font-size\n\t  self.search.style.fontSize = Math.max(Math.min((self.searchBoxWidth/width)*33, parseFloat(33)), parseFloat(13))+\"px\";\n\t  self.sizeChanged = true;\n\t} else if(self.sizeChanged && width < self.searchBoxWidth) {\n\t  self.search.style.fontSize = self.searchOriginalFontSize;\n\t}\n  },\n\n  handleSearchChange: function(evt) {\n\tvar text_length = self.search.value.length;\n\t// Update the measuring div\n\tself.lenTest.innerHTML = self.search.value;\n\t// Empty? reset it all\n\tif (text_length === 0) {\n\t  self.search.setAttribute('placeholder', self.title);\n\t  self.lenTest.innerHTML = self.title;\n\t}\n\tself.checkSearchBoxLength();\n  },\n\n  handleSubmit: function(evt) {\n\tvar main = document.querySelector('main');\n\tvar searching = document.createElement(\"span\");\n\tsearching.className = \"searching\";\n\t//searching.innerHTML = '<h2 class=\"searching\"> Searching the OCS for ' + self.search.value + '.</h2>' + main.innerHTML;\n\tsearching.innerHTML = 'Searching the OCS for <mark>' + self.search.value + '</mark>.';\n\n\t// Not yet...\n\t//main.insertBefore(searching, main.firstChild);\n\n\twindow.setTimeout(function(){\n\t\tdocument.body.className = document.body.className += ' search-submitted';\n\t}, 100);\n\t// easier testing:\n\t//evt.preventDefault();\n\t//return false;\n  }\n\n};\n\n// also on window.resize?\nif (window.innerWidth > 767) {\n    //skip waiting for doc ready to hide the h1\n\tdocument.documentElement.className = 'no-fouc';\n\n\t// Only need to wait because of a body class check for .home\n\t// probably better to update page-header.php with something else.\n\tdocument.onreadystatechange = function () {\n\t\tif (document.readyState === \"interactive\") {\n\t\t  setUpOCSsearch.init();\n\t\t}\n\t};\n}\n","\n//var projectId = window.MTIProjectId, //doesn't exist!\nvar projectId = null,\n\tmtiTracking = document.createElement('link');\n\nmtiTracking.type = 'text/css';\nmtiTracking.rel = 'stylesheet';\nmtiTracking.href = ('https:' === document.location.protocol ? 'https:' : 'http:') + '//fast.fonts.net/t/1.css?apiType=css&projectid=' + projectId;\n(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(mtiTracking);\n\n"],"sourceRoot":"assets/scripts/"}