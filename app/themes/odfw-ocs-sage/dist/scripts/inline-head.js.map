{"version":3,"sources":["../assets/scripts/search-box.js"],"names":["setUpOCSsearch","init","this","h1","document","querySelector","search","title","body","className","indexOf","firstChild","nodeValue","lenTest","getElementById","searchBoxWidth","clientWidth","searchOriginalFontSize","window","getComputedStyle","getPropertyValue","sizeChanged","self","setAttribute","innerHTML","checkSearchBoxLength","addEventListener","handleSearchChange","focusInput","evt","width","style","fontSize","Math","max","min","parseFloat","text_length","value","length","innerWidth","onreadystatechange","readyState"],"mappings":"AACA,GAAAA,iBACAC,KAAA,WACAC,KAAAC,GAAAC,SAAAC,cAAA,MACAH,KAAAI,OAAAF,SAAAC,cAAA,iBACAH,KAAAK,MAAA,KAAAH,SAAAI,KAAAC,UAAAC,QAAA,QAAA,SAAAR,KAAAC,GAAAQ,WAAAC,UACAV,KAAAW,QAAAT,SAAAU,eAAA,eACAZ,KAAAa,eAAAb,KAAAI,OAAAU,YAAA,GACAd,KAAAe,uBAAAC,OAAAC,iBAAAjB,KAAAI,OAAA,MAAAc,iBAAA,aACAlB,KAAAmB,aAAA,EACAC,KAAApB,KAGAA,KAAAC,GAAAM,UAAA,UAGAP,KAAAI,OAAAiB,aAAA,cAAAD,KAAAf,OACAL,KAAAI,OAAAiB,aAAA,oBAAAD,KAAAL,wBAGAf,KAAAW,QAAAW,UAAAF,KAAAf,MAEAe,KAAAG,uBAGAvB,KAAAI,OAAAoB,iBAAA,QAAAJ,KAAAK,oBACAzB,KAAAI,OAAAoB,iBAAA,iBAAAJ,KAAAK,oBACAzB,KAAAI,OAAAoB,iBAAA,OAAAJ,KAAAK,oBACAzB,KAAAI,OAAAoB,iBAAA,QAAAJ,KAAAM,aAKAA,WAAA,WACAN,KAAAhB,OAAAiB,aAAA,cAAA,KAGAE,qBAAA,SAAAI,GACA,GAAAC,GAAAR,KAAAT,QAAAG,YAAA,CAEAc,GAAAR,KAAAP,gBAEAO,KAAAhB,OAAAyB,MAAAC,SAAAC,KAAAC,IAAAD,KAAAE,IAAAb,KAAAP,eAAAe,EAAA,GAAAM,WAAA,KAAAA,WAAA,KAAA,KACAd,KAAAD,aAAA,GACAC,KAAAD,aAAAS,EAAAR,KAAAP,iBACAO,KAAAhB,OAAAyB,MAAAC,SAAAV,KAAAL,yBAIAU,mBAAA,SAAAE,GACA,GAAAQ,GAAAf,KAAAhB,OAAAgC,MAAAC,MAEAjB,MAAAT,QAAAW,UAAAF,KAAAhB,OAAAgC,MACA,IAAAD,IACAf,KAAAhB,OAAAiB,aAAA,cAAAD,KAAAf,OACAe,KAAAT,QAAAW,UAAAF,KAAAf,OAEAe,KAAAG,wBAIAP,QAAAsB,WAAA,MAEApC,SAAAqC,mBAAA,WACA,eAAArC,SAAAsC,YACA1C,eAAAC","file":"inline-head.js","sourcesContent":["\nvar setUpOCSsearch = {\n  init: function() {\n\tthis.h1 = document.querySelector('h1'),\n\tthis.search = document.querySelector('#search-field'),\n\tthis.title = document.body.className.indexOf('home') !== -1 ? 'Search' : this.h1.firstChild.nodeValue,\n\tthis.lenTest = document.getElementById('length-test'),\n\tthis.searchBoxWidth = this.search.clientWidth - 40,\n\tthis.searchOriginalFontSize = window.getComputedStyle(this.search, null).getPropertyValue('font-size'),\n\tthis.sizeChanged = false\n\tself = this;\n\n\t// Hide the h1 immediately\n\tthis.h1.className = 'sr-only';\n\n\t// Move it to the searchbox\n\tthis.search.setAttribute('placeholder', self.title);\n\tthis.search.setAttribute('data-og-font-size', self.searchOriginalFontSize);\n\n\t// Stuff the hidden length checker\n\tthis.lenTest.innerHTML = self.title;\n\t// And check the new length\n\tself.checkSearchBoxLength();\n\n\t// Do stuff\n\tthis.search.addEventListener('input', self.handleSearchChange);\n\tthis.search.addEventListener('propertychange', self.handleSearchChange);\n\tthis.search.addEventListener('blur', self.handleSearchChange);\n\tthis.search.addEventListener('focus', self.focusInput);\n\n  },\n\n  // When the user clicks out of the box, reset the placeholder if empty\n  focusInput: function() {\n\tself.search.setAttribute('placeholder', \"\");\n  },\n\n  checkSearchBoxLength: function(evt) {\n\tvar width = (self.lenTest.clientWidth + 1);// + \"px\";\n\n\tif (width > self.searchBoxWidth) {\n\t  // resize on change but set a min and max font-size\n\t  self.search.style.fontSize = Math.max(Math.min((self.searchBoxWidth/width)*33, parseFloat(33)), parseFloat(13))+\"px\";\n\t  self.sizeChanged = true;\n\t} else if(self.sizeChanged && width < self.searchBoxWidth) {\n\t  self.search.style.fontSize = self.searchOriginalFontSize;\n\t}\n  },\n\n  handleSearchChange: function(evt) {\n\tvar text_length = self.search.value.length;\n\t// Update our measuring div\n\tself.lenTest.innerHTML = self.search.value;\n\tif (text_length === 0) {\n\t  self.search.setAttribute('placeholder', self.title);\n\t  self.lenTest.innerHTML = self.title;\n\t}\n\tself.checkSearchBoxLength();\n  }\n}\n\nif (window.innerWidth > 767) {\n  // also on window.resize?\n\tdocument.onreadystatechange = function () {\n\t\tif (document.readyState == \"interactive\") {\n\t\t  setUpOCSsearch.init();\n\t\t}\n\t}\n}\n"],"sourceRoot":"assets/scripts/"}